#!/usr/bin/env python3

{{ postprocess_script }}

pattern = re.compile(r"{{ regex }}")
data = process_bench_regex('.', pattern, metadata_file='metadata.json', include_metrics=True)

import csv

with open('results.csv', 'w', newline='') as csvfile:
    fieldnames = list(set().union(*(d.keys() for d in data)))
    fieldnames.sort()
    writer = csv.DictWriter(csvfile, fieldnames=fieldnames)
    writer.writeheader()
    writer.writerows(data)


